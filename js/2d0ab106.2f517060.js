(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0ab106"],{"144a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-mt-none q-pt-none",attrs:{padding:""}},[a("q-breadcrumbs",{staticClass:"q-pa-xs text-grey-8"},[a("q-breadcrumbs-el",{staticClass:"active-breadcrumb",attrs:{icon:"copyright",label:"Marcas",to:"/admin/marcas"}})],1),a("q-separator",{staticClass:"q-mb-sm",attrs:{color:"primary"}}),a("draggable",{staticClass:"row q-mb-xl",attrs:{handle:".handle"},model:{value:t.items,callback:function(e){t.items=e},expression:"items"}},t._l(t.items,function(e,i){return a("div",{key:e.id,staticClass:"q-pa-xs col-xl-3 col-lg-3 col-md-3 col-sm-4 col-xs-12"},[a("q-card",[a("q-img",{staticStyle:{height:"170.7px"},attrs:{id:"img-marca-"+i,src:e.imagePath}},[a("div",{staticClass:"absolute-top text-left bg-transparent"},[a("q-btn",{staticClass:"handle",attrs:{icon:"drag_handle",round:"",color:"purple"}})],1),a("div",{staticClass:"absolute-bottom text-right bg-transparent"},[a("q-btn",{attrs:{color:"primary",round:"",icon:"more_vert"}},[a("q-menu",{attrs:{cover:"","auto-close":""}},[a("q-list",[a("q-item",{attrs:{clickable:""}},[a("q-item-section",{on:{click:function(a){return t.selectImagen(e,i)}}},[t._v("Cambiar Imagen")])],1),a("q-item",{attrs:{clickable:""}},[a("q-item-section",{on:{click:function(a){return t.eliminar(e)}}},[t._v("Eliminar Marca")])],1)],1)],1)],1)],1)]),a("q-card-section",[a("div",{staticClass:"row items-center no-wrap"},[a("div",{staticClass:"col"},[a("div",{staticClass:"text-h6 label-dots"},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.nombre)+"\n\t\t\t\t\t\t\t"),a("q-popup-edit",{attrs:{buttons:""},model:{value:e.nombre,callback:function(a){t.$set(e,"nombre",a)},expression:"item.nombre"}},[a("q-input",{attrs:{dense:"",autofocus:""},model:{value:e.nombre,callback:function(a){t.$set(e,"nombre",a)},expression:"item.nombre"}})],1)],1),a("div",{staticClass:"text-subtitle2 label-dots"},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.descripcion)+"\n\t\t\t\t\t\t\t"),a("q-popup-edit",{attrs:{buttons:""},model:{value:e.descripcion,callback:function(a){t.$set(e,"descripcion",a)},expression:"item.descripcion"}},[a("q-input",{attrs:{dense:"",autofocus:""},model:{value:e.descripcion,callback:function(a){t.$set(e,"descripcion",a)},expression:"item.descripcion"}})],1)],1)])])])],1)],1)}),0),a("q-toolbar",{staticClass:"bg-grey-3 text-white q-my-none shadow-2 fixed-bottom"},[a("q-space"),a("q-btn",{attrs:{round:"",icon:"keyboard_arrow_up",color:"primary"}}),a("q-space"),a("q-btn",{attrs:{label:"Nuevo",color:"primary"},on:{click:t.nuevo}},[a("q-tooltip",{attrs:{"transition-show":"rotate","transition-hide":"rotate"}},[t._v("\n\t\t\t\tNueva marca\n\t\t\t")])],1),a("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Guardar",color:"primary"},on:{click:t.guardar}}),a("q-btn",{staticClass:"q-ml-sm text-primary",attrs:{label:"restore",type:"reset",flat:""},on:{click:t.reset}})],1),a("input",{ref:"inputFile",staticStyle:{display:"none"},attrs:{type:"file",name:"myImage",accept:".png, .jpg, .jpeg"},on:{change:t.changeValueInput}})],1)},s=[],o=a("5aec"),n=a("310e"),c=a.n(n),r={components:{editable:o["a"],draggable:c.a},data:function(){return{itemElegido:null,items:[]}},mounted:function(){this.getData()},methods:{nuevo:function(){this.items.push({id:(new Date).valueOf(),nombre:"Nombre",descripcion:"Descripcion",imagen:"blank.png",imagePath:"statics/blank.png",estado:!0,orden:null})},guardar:function(){var t=this;t.$q.loading.show();var e=new FormData;this.items.forEach(function(t,a){t.orden=a,t.imageFile&&e.append("".concat(t.id),t.imageFile)}),e.append("items",JSON.stringify(this.items)),this.$axios({url:"".concat(t.$store.state.corprotec.baseUrl,"guardarData/marca"),method:"post",data:e,config:{headers:{"Content-Type":"multipart/form-data"}}}).then(function(e){t.items=e.data,t.$q.notify({message:"Ok, Cambios Realizados.",position:"top",icon:"thumb_up",color:"green-5"}),t.$q.loading.hide()}).catch(function(e){t.$q.notify({message:e,position:"top",icon:"warning",color:"red-5"}),console.log(e)})},eliminar:function(t){var e=this.items.indexOf(t),a=this;t.id>1e6?e>-1&&a.items.splice(e,1):(a.$q.loading.show(),a.$axios.get("".concat(a.$store.state.corprotec.baseUrl,"marcas/delData/").concat(t.id)).then(function(t){console.log(t.data),a.$q.loading.hide(),t.data.success?(e>-1&&a.items.splice(e,1),a.$q.notify({message:t.data.msg,position:"top",icon:"thumb_up",color:"green"})):a.$q.dialog({dark:!0,title:"Alerta",message:t.data.msg,persistent:!0}).onOk(function(){console.log("ok")})}))},reset:function(){this.getData()},selectImagen:function(t,e){this.itemElegido=t,this.itemElegido.index=e,this.$refs.inputFile.click()},changeValueInput:function(){var t=this.$refs.inputFile.files[0];this.itemElegido.imagePath=window.URL.createObjectURL(t),this.itemElegido.imageFile=t,document.getElementById("img-marca-"+this.itemElegido.index).childNodes[1].style.backgroundImage="url(".concat(window.URL.createObjectURL(t),")"),this.$refs.inputFile.value="",this.itemElegido=null},getData:function(){var t=this;t.$q.loading.show(),t.$axios.get("".concat(t.$store.state.corprotec.baseUrl,"marcas/getAllData")).then(function(e){t.items=e.data,t.items.forEach(function(e,a){e.imagePath="".concat(t.$store.state.corprotec.baseUrl,"public/img/img-marcas/").concat(e.imagen,"?t=").concat(Math.random()),t.$q.loading.hide()})})}}},l=r,m=a("2877"),d=Object(m["a"])(l,i,s,!1,null,null,null);e["default"]=d.exports}}]);