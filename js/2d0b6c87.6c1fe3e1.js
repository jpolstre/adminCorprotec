(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0b6c87"],{"1f40":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{staticClass:"q-mt-none q-pt-none",attrs:{padding:""}},[i("q-breadcrumbs",{staticClass:"q-pa-xs text-grey-8"},[i("q-breadcrumbs-el",{staticClass:"active-breadcrumb",attrs:{icon:"slideshow",label:"Slides",to:"/admin/slides"}})],1),i("q-separator",{staticClass:"q-mb-sm",attrs:{color:"primary"}}),i("draggable",{staticClass:"row q-mb-xl",attrs:{handle:".handle"},model:{value:t.items,callback:function(e){t.items=e},expression:"items"}},t._l(t.items,function(e,a){return i("div",{key:e.id,staticClass:"q-pa-xs col-xl-3 col-lg-3 col-md-3 col-sm-4 col-xs-12"},[i("q-card",[i("q-img",{staticStyle:{height:"170.7px"},attrs:{id:"img-slide-"+a,src:e.imagePath}},[i("div",{staticClass:"absolute-top text-left bg-transparent"},[i("q-btn",{staticClass:"handle",attrs:{icon:"drag_handle",round:"",color:"purple"}})],1),i("div",{staticClass:"absolute-bottom text-right bg-transparent"},[i("q-btn",{attrs:{color:"primary",round:"",icon:"more_vert"}},[i("q-menu",{attrs:{cover:"","auto-close":""}},[i("q-list",[i("q-item",{attrs:{clickable:""}},[i("q-item-section",{on:{click:function(i){return t.selectImagen(e,a)}}},[t._v("Cambiar Imagen")])],1),i("q-item",{attrs:{clickable:""}},[i("q-item-section",{on:{click:function(i){return t.eliminar(e)}}},[t._v("Eliminar Slide")])],1)],1)],1)],1)],1)]),i("q-card-section",[i("div",{staticClass:"row items-center no-wrap"},[i("div",{staticClass:"col"},[i("div",{staticClass:"text-h6 label-dots"},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.titulo)+"\n\t\t\t\t\t\t\t"),i("q-popup-edit",{attrs:{buttons:""},model:{value:e.titulo,callback:function(i){t.$set(e,"titulo",i)},expression:"item.titulo"}},[i("q-input",{attrs:{dense:"",autofocus:""},model:{value:e.titulo,callback:function(i){t.$set(e,"titulo",i)},expression:"item.titulo"}})],1)],1),i("div",{staticClass:"text-subtitle2  label-dots"},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.subtitulo)+"\n\t\t\t\t\t\t\t"),i("q-popup-edit",{attrs:{buttons:""},model:{value:e.subtitulo,callback:function(i){t.$set(e,"subtitulo",i)},expression:"item.subtitulo"}},[i("q-input",{attrs:{dense:"",autofocus:""},model:{value:e.subtitulo,callback:function(i){t.$set(e,"subtitulo",i)},expression:"item.subtitulo"}})],1)],1)])])])],1)],1)}),0),i("q-toolbar",{staticClass:"bg-grey-3 text-white q-my-none shadow-2 fixed-bottom"},[i("q-space"),i("q-btn",{attrs:{round:"",icon:"keyboard_arrow_up",color:"primary"}}),i("q-space"),i("q-btn",{attrs:{label:"Nuevo",color:"primary"},on:{click:t.nuevo}},[i("q-tooltip",{attrs:{"transition-show":"rotate","transition-hide":"rotate"}},[t._v("\n\t\t\t\tNuevo slide\n\t\t\t")])],1),i("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Guardar",color:"primary"},on:{click:t.guardar}}),i("q-btn",{staticClass:"q-ml-sm text-primary",attrs:{label:"restore",type:"reset",flat:""},on:{click:t.reset}})],1),i("input",{ref:"inputFile",staticStyle:{display:"none"},attrs:{type:"file",name:"myImage",accept:".png, .jpg, .jpeg"},on:{change:t.changeValueInput}})],1)},s=[],o=i("5aec"),n=i("310e"),l=i.n(n),c={components:{editable:o["a"],draggable:l.a},data:function(){return{itemElegido:null,items:[]}},mounted:function(){this.getData()},methods:{nuevo:function(){this.items.push({id:(new Date).valueOf(),titulo:"Nombre",subtitulo:"Descripcion",url:this.$store.state.corprotec.baseUrl,imagen:"blank.png",imagePath:"statics/blank.png",estado:"habilitado",orden:null})},guardar:function(){var t=this;t.$q.loading.show();var e=new FormData;this.items.forEach(function(t,i){t.orden=i,t.imageFile&&e.append("".concat(t.id),t.imageFile)}),e.append("items",JSON.stringify(this.items)),this.$axios({url:"".concat(t.$store.state.corprotec.baseUrl,"guardarData/slide"),method:"post",data:e,config:{headers:{"Content-Type":"multipart/form-data"}}}).then(function(e){t.items=e.data,t.$q.notify({message:"Ok, Cambios Realizados.",position:"top",icon:"thumb_up",color:"green-5"}),t.$q.loading.hide()}).catch(function(e){t.$q.notify({message:e,position:"top",icon:"warning",color:"red-5"}),console.log(e)})},eliminar:function(t){var e=this.items.indexOf(t),i=this;t.id>1e6?e>-1&&i.items.splice(e,1):(i.$q.loading.show(),i.$axios.get("".concat(i.$store.state.corprotec.baseUrl,"slides/delData/").concat(t.id)).then(function(t){console.log(t.data),i.$q.loading.hide(),t.data.success?(e>-1&&i.items.splice(e,1),i.$q.notify({message:t.data.msg,position:"top",icon:"thumb_up",color:"green"})):i.$q.dialog({dark:!0,title:"Alerta",message:t.data.msg,persistent:!0}).onOk(function(){console.log("ok")})}))},reset:function(){this.getData()},selectImagen:function(t,e){this.itemElegido=t,this.itemElegido.index=e,this.$refs.inputFile.click()},changeValueInput:function(){var t=this.$refs.inputFile.files[0];this.itemElegido.imagePath=window.URL.createObjectURL(t),this.itemElegido.imageFile=t,document.getElementById("img-slide-"+this.itemElegido.index).childNodes[1].style.backgroundImage="url(".concat(window.URL.createObjectURL(t),")"),this.$refs.inputFile.value="",this.itemElegido=null},getData:function(){var t=this;t.$q.loading.show(),t.$axios.get("".concat(t.$store.state.corprotec.baseUrl,"slides/getAllData")).then(function(e){t.items=e.data,t.items.forEach(function(e,i){e.imagePath="".concat(t.$store.state.corprotec.baseUrl,"public/img/bg-slider-main/").concat(e.imagen,"?t=").concat(Math.random()),t.$q.loading.hide()})})}}},r=c,u=i("2877"),d=Object(u["a"])(r,a,s,!1,null,null,null);e["default"]=d.exports}}]);